# 3.3 Services && Srv
### 3.3.1 Services
上节课我们介绍了ROS的通信方式中的topic(主题)通信，我们知道topic是ROS中的一种单向的异步通信方式。这节我们来介绍ROS通信中的另一种通信方式——services(服务)，这种方式和topic有着明显区别的一点就是services通信是双向的，它不仅可以发送消息，同时还会有反馈，也即是services在节点发送一个request，要等待接收一个response，这样才完成了整个服务通信。
### 3.3.2 工作原理
services的工作原理与topic有些不同。我们学习过topic知道，一个节点在master处注册，可以订阅多个主题，一个主题也可以被多个节点订阅。当订阅的主题有消息发到master，那么订阅了该主题的节点，都将接收到此消息，之后节点开始各自处理消息。而services也可以被多个节点注册订阅，与topic不同的是，当一个节点调用service的时候，如果成功，service的提供者会发送一个response，最后只有一个节点接受service完成通信。结构示意图如下：

![](https://i.loli.net/2017/11/10/5a0553d7750cd.png)


### 3.3.3 参数命令

在实际应用中，service通信方式的命令时`rosservice`，具体的命令参数如下表：


|    rosservice 命令    | 作用 |
| :------:   | :------:           |
| `rosservice list`  |   显示服务列表 |
| `rosservice info`   |  打印服务信息  |
| `rosservice type`   |  打印服务类型 |
| `rosservice uri `    |  打印服务ROSRPC uri|
| `rosservice find`     |  按服务类型查找服务  |
|`rosservice call`    |  使用所提供的args调用服务 |
|`rosservice args` |  打印服务参数  |

### 3.3.4 Srv
类似msg，srv(服务文件)是用来描述服务（service）类型的，它声明了一个服务包括请求(request)和响应（response）。而与msg不同的就是，srv包含的这两个部分——request和response。srv文件存放在srv目录下,具体的操作指令如下表：

|    rossrv 命令    | 作用 |
| :------:   | :------:           |
| `rossrv show`  |  显示服务描述|
| `rossrv list`   | 列出所有服务  |
| `rossrv md5`   |  显示服务md5sum |
| `rossrv package `    |  列出包中的服务|
|`rossrv packages`    |  列出包含服务的包|

#### 小结
本节继上节课介绍了topic通信方式后，又介绍了ROS通信方式的服务，下节课我们将继续介绍另一种ROS通信方式——参数服务器。



