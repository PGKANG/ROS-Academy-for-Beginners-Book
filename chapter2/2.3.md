# 2.3 package软件包

package是catkin编译的基本单元，编译的对象就是一个个package。任何ROS程序只有在package中才能编译。package也是ROS程序源代码存放的地方，任何ROS的代码无论是C++还是Python都要放到package中，这样才能正常的编译和运行。一个package里可以有多个ROS程序。

### 2.3.1 package结构

一个package下常见的文件、路径有：

```
  ├── CMakeLists.txt    #package的编译规则(必须)
  ├── package.xml       #package的描述信息(必须)
  ├── src/              #源代码文件
  ├── include/          #C++头文件
  ├── scripts/          #可执行脚本
  ├── msg/              #自定义消息
  ├── srv/              #自定义服务
  ├── models/           #3D模型文件
  ├── urdf/             #urdf文件
  ├── launch/           #launch文件
  ├── include/          #C++头文件
```

其中定义package的是`CMakeLists.txt`和`package.xml`，这两个文件是package中必不可少的。catkin编译系统在编译前，首先就要解析这两个文件。这两个文件就定义了一个package。

* CMakeLists.txt: 定义package的包名、依赖、源文件、目标文件等编译规则
* package.xml: 描述package的包名、版本号、作者、依赖等信息
* src/: 存放ROS的源代码，包括C++的源码和Python的module
* include/: 存放C++源码对应的自定义头文件
* scripts/: 存放可执行脚本，例如shell脚本\(.sh\)、Python脚本\(.py\)
* msg/: 存放自定义格式的消息\(.msg\)
* srv/: 存放自定义格式的服务\(.srv\)
* models/: 存放机器人或仿真场景的3D模型\(.sda, .stl, .dae等\)
* urdf/: 存放机器人的模型描述\(.urdf或.xacro\)
* launch/: 存放launch文件\(.launch或.xml\)

通常ROS文件组织都是按照以上的形式，这是约定俗成的命名习惯，并不是必须这样，只有`CMakeLists.txt`和`package.xml`必须得有。

### 2.3.2 package的创建

一般创建一个package需要在`catkin_ws/src`下,用到`catkin_create_pkg`命令，用法是：  
`catkin_create_pkg [package] [depends]`  
其中\[package\]是包名，\[depends\]是依赖的包名。

例如，新建一个package叫做test\_pkg,依赖roscpp、rospy、std\_msgs\(常用依赖\)。  
`catkin_create_pkg test_pkg roscpp rospy std_msgs`

这样就会在当前路径下新建`test_pkg`路径，包括：

```
  ├── CMakeLists.txt
  ├── include
  │   └── test_pkg
  ├── package.xml
  └── src
```

`catkin_create_pkg`已经帮你建立了路径，填充好了`CMakeLists.txt`和`package.xml`。

### 2.3.3 package相关命令

##### rospack

rospack是对package管理的工具，命令的用法如下：

| rostopic命令 | 作用 |
| :---: | :---: |
| `rospack help` | 显示rospack的用法 |
| `rospack list` | 列出本机所有package |
| `rospack depends [package]` | 显示package的依赖包 |
| `rospack find [package]` | 定位某个package |
| `rospack profile` | 强制重新刷新所有package的位置记录 |

以上命令如果package缺省，则默认为当前目录\(如果当前目录包含package.xml\)

##### roscd
| rostopic命令 | 作用 |
| :---: | :---: |
| `roscd [pacakge]` | cd到package位置 |

##### rosls
| rostopic命令 | 作用 |
| :---: | :---: |
| `roscd [pacakge]` | cd到package位置 |

##### rosdep

##### roswtf


